<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="report_catalog">
        <t t-call="web.html_container">
             <t t-foreach="docs" t-as="doc">
                <t t-call="catalogs.report_catalog_tmpl"/>
            </t>
        </t>
    </template>

    <template id="report_catalog_tmpl">
        <xpath expr="//div[@class='header']" position="replace">
            <div class="header mb5" style="max-height: 200px !important;">
                <div style="position: relative; text-align: center;">
                    <img t-att-src="image_data_uri(doc.header_image)" alt="Encabezado del  Catálogo"
                         style="width: 100% !important; height: 75px !important;"/>
                    <div style="position: absolute; transform: translate(-50%, -50%); top: 50%; left: 5%;">
                        <p t-att-style="doc.css_title()" t-esc="doc.name"></p>
                    </div>
                </div>
            </div>                                  
        </xpath>
        <t t-call="web.external_layout">
            <t t-set="doc" t-value="doc.with_context()"/>

            <div class="page">
                <div class="oe_structure"/>

                <div class="row" style="padding-top: 7px !important;">
                    <!--Div con listado de productos-->
                    <div class="container text-center">
                        <t t-foreach="doc.product_ids" t-as="product">
                            <!--Div para un producto-->
                            <div style="width: 26% !important; padding: 1.5rem !important; text-align: center !important;
                                        display: inline-block;  vertical-align: top;">
                                <div style="border: 1px solid #e96465;">
                                    <div>
                                        <img t-att-src="image_data_uri(product.product_id.image_1920)"
                                             alt="Producto" style="width: 250px !important;"/>
                                    </div>
                                </div>
                                <div style="background-color:#e96465 !important; padding: 5px;">
                                    <p style="color: white;" t-esc="product.product_id.name"></p>
                                    <p style="color: white;" t-esc="product.product_id.default_code"></p>
                                    <p style="color: white;" t-esc="product.product_id.lst_price"></p>
                                </div>
                            </div>
                        </t>
                    </div>
                </div>

                <div class="oe_structure"/>
            </div>

            <xpath expr="//div[@class='footer']" position="replace">
                <div class="footer">
                    <div class="oe_structure"/>
                    <div style="padding: 0px !important; margin-top: 10px !important;">
                        <div style="position: relative;">
                            <img t-att-src="image_data_uri(doc.footer_image)" alt="Pie del  Catálogo" style="width: 100% !important; height: 75px !important;"/>           
                        </div>
                    </div>
                </div>
            </xpath>
        </t>
        <style>
            @media print {
                thead {
                    page-break-inside: avoid;
                }

                #div-final
                {
                    page-break-inside: avoid;
                }

                .header {
                    position: fixed;
                }

                .footer {
                    position: fixed;
                    bottom: 0;
                }
            }
            @page {
                size: Letter;
            }
        </style>
    </template>
</odoo>