<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="report_catalog">
        <t t-call="web.html_container">
             <t t-foreach="docs" t-as="doc">
                <t t-call="catalogs.report_catalog_tmpl"/>
            </t>
        </t>
    </template>

    <template id="report_catalog_tmpl">
        <xpath expr="//div[@class='header']" position="replace">
            <div class="header" style="max-height: 0px !important;">
            </div>                                  
        </xpath>
        <t t-call="web.external_layout">
            <t t-set="doc" t-value="doc.with_context()"/>

            <div class="page m-0 p-0">
                <div class="oe_structure"/>

                <t t-foreach="doc.group_lines()" t-as="group">
                    <!--Encabezado de cada página-->
                    <div class="row">
                        <div class="col-12 mb-0 p-0">
                            <div id="start" style="position: relative; display: inline-block; text-align: center; width: 100%;">
                                <!--Imagen de encabezado-->
                                <img t-att-src="image_data_uri(doc.header_image)" alt="Encabezado del  Catálogo"
                                             style="width: 100% !important; height: 68px !important;"/>
                                <!--Texto sobre la imagen-->
                                <div style="position: absolute; top: 25%; transform: translate(-50%, 25%);
                                            width: 100% !important; text-align: center;">
                                    <p t-att-style="doc.css_title()" t-esc="doc.name"></p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!--Div con listado de productos-->
                    <div class="row mt-3" style="padding-top: 3px !important;">
                        <div class="col-12" style="text-align: center;">
                            <div class="container" style="text-align: center; max-height: 47.63rem !important; min-height: 47.63rem !important;; padding-bottom: 5px !important;">
                                <t t-foreach="group" t-as="product">
                                    <!--Div para un producto-->
                                    <div style="width: 200px !important; height: 300px !important; padding: 0.5rem !important; text-align: center !important;
                                                display: inline-block; margin-left: 1.5rem; margin-right: 1.5rem; margin-top: 1.5rem;">
                                        <div t-att-style="doc.css_border_rect()">
                                            <div style="width: 200px !important; height; 175px !important;">
                                                <img t-att-src="image_data_uri(product.product_id.image_catalog)"
                                                     alt="Producto" t-att-style="doc.css_image_product()"/>
                                            </div>

                                            <div t-att-style="doc.css_bg_rect()">
                                                <p t-att-style="doc.css_data_rect()" t-esc="product.product_id.name"></p>
                                                <p t-att-style="doc.css_data_rect_1()" t-esc="product.product_id.default_code"></p>
                                                <p t-att-style="doc.css_data_rect_1()">$ <span t-esc="'{:.2f}'.format(product.product_id.lst_price)"/></p>
                                            </div>
                                        </div>
                                    </div>

                                    <t t-if="product_index == 2">
                                        <br/>
                                    </t>
                                </t>
                            </div>
                        </div>
                    </div>

                    <!--Footer de cada pagina-->
                    <div class="row">
                         <div class="col-12 mt-0 mr-0 ml-0">
                             <div style="position: absolute; bottom: 0px; left: 0px; right: 0px; display: inline-block; text-align: center; width: 100%;">
                                <img t-att-src="image_data_uri(doc.footer_image)" alt="Pie del  Catálogo" style="width: 100% !important; height: 90px !important;"/>
                            </div>
                         </div>
                    </div>
                </t>


                <div class="oe_structure"/>
            </div>

            <xpath expr="//div[@class='footer']" position="replace">
                <div class="footer" style="max-width: 0px !important;"></div>
            </xpath>
        </t>
        <style>
            main {
                margin: 0px !important;
                padding: 0px !important;
            }

            body {
                margin: 0px !important;
                padding: 0px !important;
            }

            @media print {
                #start {
                    page-break-inside: avoid;
                }
                #final
                {
                    page-break-inside: avoid;
                }

                .header {
                    position: fixed;
                }

                .footer {
                    position: fixed;
                    bottom: 0;
                }
            }
            @page {
                size: Letter;
            }
        </style>
    </template>
</odoo>
